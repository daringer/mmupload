<!doctype html>
<head lang=en>
<meta charset="UTF-8" />
<title>Fancy Uploader Frontend</title>


<style type="text/css">
{{ css|safe }}
</style>

</head>
<body>

{% with messages = get_flashed_messages() %}
  {% if messages %}
	<div id=flash>
    {% for message in messages %}
		{{ message }}<br />
		{% endfor %}
  {% endif %}
 </div>
{% endwith %}


{% if show_upload %}
<div id=upload>
<form method=POST enctype=multipart/form-data action="{{ url_for("create", dirname=base_dir) }}">
	<label>upload:</label>
	<input type=file name=target /> <input type=submit value=upload name=what />
</form>
</div>
{% endif %}

<div id=curpath>
	<label>current dir:</label>
	{% for name, path in cur_path_toks %}
		<a href={{ url_for("show", dirname=path) }}>{{ name }}</a> /
	{% endfor %}
</div><br />

{% if show_newdir %}
<div id=newdir>
<form method=POST action="{{ url_for("create", dirname=base_dir) }}">
	<label>new dir:</label>
	<input type=text name=new_dirname /> <input type=submit value=add name=what />
</form>
</div>
{% endif %}


{% if show_dirs %}
<div id=dirs><ul>
  {% if base_dir != "." %}
	<li>
		<a class=name href="{{ url_for("show", dirname=parent_path) }}">..</a>
		<a class=action>&nbsp;</a>
	</li>
	{% endif %}
	{% for target, path in dirs %}
	<li>
		<a class=name href="{{ url_for("show", dirname=path) }}">{{ target }}</a>
		<a class=action href="{{ url_for("delete", target=path) }}">delete</a>
	</li>
	{% endfor %}
</ul></div>
{% endif %}
<br />


{% if show_files and files %}
<div id=files>
<ul>
{% for target, path in files %}
	<li class=file_item>
  	<a class=name href="{{ url_for("get_file", target=path) }}">{{ target }}</a>
		<a class=action href="{{ url_for("delete", target=path) }}">delete</a>
	</li>
{% endfor %}
</ul>
</div>
{% endif %}

</body>
